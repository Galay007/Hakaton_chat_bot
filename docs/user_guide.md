# Руководство пользователя

## Начало работы
1. Найдите бот в Telegram по имени, которое указано при деплойменте.
2. Нажмите **Start** или введите `/start` — бот пришлёт краткую инструкцию и лимиты.

## Загрузка файлов
- Бот принимает **только JSON** файлы экспорта, полученные через «Экспорт данных» в Telegram Desktop.
- Количество файлов не ограничено ботом. Telegram сам разделит файлы на сообщения, если отправлено более 10 файлов.
- Размер файла ограничен лимитами в настройках бота. Чтобы узнать размер ограничения, отправьте команду /help.

## Команды
| Команда | Описание |
|---------|----------|
| `/start` | Сброс текущей сессии и повторное приветствие |
| `/help` | Подробная инструкция по шагам |
| `/reset` | Очистить все ранее загруженные данные, начать заново |
| `/export` | Получить итоговый список участников/Excel |

## Получение результата
1. Как только все файлы загружены, выполните `/export`.  
   - Если участников < 50 — получите список в чате.  
   - Если ≥ 51 — бот пришлёт Excel с вкладками:
     - **Участники** — авторы сообщений (дедуплицированы, удалённые аккаунты исключены).
     - **Упоминания** — все встреченные `@username`.
     - **Каналы** — упоминания `t.me/...`.
3. После выдачи результат очищается автоматически. При необходимости можно снова отправить файлы и повторить процесс.

## Типичные ошибки
- **"Формат файла не поддерживается"** — убедитесь, что экспорт выполнен в Telegram Desktop и отправлен как файл, а не как сжатый документ.
- **"Нет данных"** при `/export` — бот ещё не получил ни одного валидного файла.

## Конфиденциальность
- Файлы хранятся только в оперативной памяти бота и удаляются сразу после обработки.
- Никакие данные не кэшируются на диске и не пересылаются сторонним сервисам.
- Excel-файл создаётся в памяти и отправляется только пользователю, который запросил выгрузку.

## FAQ
**Q:** Можно ли отправлять ZIP-архивы?  
**A:** Нет, распакуйте экспорт и отправьте JSON.

**Q:** Что если среди отправленных файлов, отправлен файл недопустимого формата?  
**A:** Ничего страшного, этот файл не будет обработан. Все остальные файлы допустимого формата обработаются.

**Q:** Если файл превышает ограничение по размеру?  
**A:** Экспортируйте историю чата, ограничив размер файла в настройках экспорта в Telegram.

**Q:** Что если среди отправленных файлов, отправлен файл недопустимого размера?  
**A:** Будут обработы файлы разрешенного размера. По файлам с превышением будет выведено отдельное сообщение.

**Q:** Можно ли получить CSV вместо Excel?  
**A:** Нет, по требованиям заказчика используется только Excel, но после получения файла его можно конвертировать вручную.
